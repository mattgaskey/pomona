"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

!function (e, t) {
  "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", t) : "object" == (typeof module === "undefined" ? "undefined" : _typeof(module)) && module.exports ? module.exports = t() : e.EvEmitter = t();
}("undefined" != typeof window ? window : undefined, function () {
  function e() {}var t = e.prototype;return t.on = function (e, t) {
    if (e && t) {
      var i = this._events = this._events || {},
          n = i[e] = i[e] || [];return n.indexOf(t) == -1 && n.push(t), this;
    }
  }, t.once = function (e, t) {
    if (e && t) {
      this.on(e, t);var i = this._onceEvents = this._onceEvents || {},
          n = i[e] = i[e] || {};return n[t] = !0, this;
    }
  }, t.off = function (e, t) {
    var i = this._events && this._events[e];if (i && i.length) {
      var n = i.indexOf(t);return n != -1 && i.splice(n, 1), this;
    }
  }, t.emitEvent = function (e, t) {
    var i = this._events && this._events[e];if (i && i.length) {
      i = i.slice(0), t = t || [];for (var n = this._onceEvents && this._onceEvents[e], o = 0; o < i.length; o++) {
        var r = i[o],
            s = n && n[r];s && (this.off(e, r), delete n[r]), r.apply(this, t);
      }return this;
    }
  }, t.allOff = function () {
    delete this._events, delete this._onceEvents;
  }, e;
}), function (e, t) {
  "use strict";
  "function" == typeof define && define.amd ? define(["ev-emitter/ev-emitter"], function (i) {
    return t(e, i);
  }) : "object" == (typeof module === "undefined" ? "undefined" : _typeof(module)) && module.exports ? module.exports = t(e, require("ev-emitter")) : e.imagesLoaded = t(e, e.EvEmitter);
}("undefined" != typeof window ? window : undefined, function (e, t) {
  function i(e, t) {
    for (var i in t) {
      e[i] = t[i];
    }return e;
  }function n(e) {
    if (Array.isArray(e)) return e;var t = "object" == (typeof e === "undefined" ? "undefined" : _typeof(e)) && "number" == typeof e.length;return t ? d.call(e) : [e];
  }function o(e, t, r) {
    if (!(this instanceof o)) return new o(e, t, r);var s = e;return "string" == typeof e && (s = document.querySelectorAll(e)), s ? (this.elements = n(s), this.options = i({}, this.options), "function" == typeof t ? r = t : i(this.options, t), r && this.on("always", r), this.getImages(), h && (this.jqDeferred = new h.Deferred()), void setTimeout(this.check.bind(this))) : void a.error("Bad element for imagesLoaded " + (s || e));
  }function r(e) {
    this.img = e;
  }function s(e, t) {
    this.url = e, this.element = t, this.img = new Image();
  }var h = e.jQuery,
      a = e.console,
      d = Array.prototype.slice;o.prototype = Object.create(t.prototype), o.prototype.options = {}, o.prototype.getImages = function () {
    this.images = [], this.elements.forEach(this.addElementImages, this);
  }, o.prototype.addElementImages = function (e) {
    "IMG" == e.nodeName && this.addImage(e), this.options.background === !0 && this.addElementBackgroundImages(e);var t = e.nodeType;if (t && u[t]) {
      for (var i = e.querySelectorAll("img"), n = 0; n < i.length; n++) {
        var o = i[n];this.addImage(o);
      }if ("string" == typeof this.options.background) {
        var r = e.querySelectorAll(this.options.background);for (n = 0; n < r.length; n++) {
          var s = r[n];this.addElementBackgroundImages(s);
        }
      }
    }
  };var u = { 1: !0, 9: !0, 11: !0 };return o.prototype.addElementBackgroundImages = function (e) {
    var t = getComputedStyle(e);if (t) for (var i = /url\((['"])?(.*?)\1\)/gi, n = i.exec(t.backgroundImage); null !== n;) {
      var o = n && n[2];o && this.addBackground(o, e), n = i.exec(t.backgroundImage);
    }
  }, o.prototype.addImage = function (e) {
    var t = new r(e);this.images.push(t);
  }, o.prototype.addBackground = function (e, t) {
    var i = new s(e, t);this.images.push(i);
  }, o.prototype.check = function () {
    function e(e, i, n) {
      setTimeout(function () {
        t.progress(e, i, n);
      });
    }var t = this;return this.progressedCount = 0, this.hasAnyBroken = !1, this.images.length ? void this.images.forEach(function (t) {
      t.once("progress", e), t.check();
    }) : void this.complete();
  }, o.prototype.progress = function (e, t, i) {
    this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded, this.emitEvent("progress", [this, e, t]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, e), this.progressedCount == this.images.length && this.complete(), this.options.debug && a && a.log("progress: " + i, e, t);
  }, o.prototype.complete = function () {
    var e = this.hasAnyBroken ? "fail" : "done";if (this.isComplete = !0, this.emitEvent(e, [this]), this.emitEvent("always", [this]), this.jqDeferred) {
      var t = this.hasAnyBroken ? "reject" : "resolve";this.jqDeferred[t](this);
    }
  }, r.prototype = Object.create(t.prototype), r.prototype.check = function () {
    var e = this.getIsImageComplete();return e ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image(), this.proxyImage.addEventListener("load", this), this.proxyImage.addEventListener("error", this), this.img.addEventListener("load", this), this.img.addEventListener("error", this), void (this.proxyImage.src = this.img.src));
  }, r.prototype.getIsImageComplete = function () {
    return this.img.complete && this.img.naturalWidth;
  }, r.prototype.confirm = function (e, t) {
    this.isLoaded = e, this.emitEvent("progress", [this, this.img, t]);
  }, r.prototype.handleEvent = function (e) {
    var t = "on" + e.type;this[t] && this[t](e);
  }, r.prototype.onload = function () {
    this.confirm(!0, "onload"), this.unbindEvents();
  }, r.prototype.onerror = function () {
    this.confirm(!1, "onerror"), this.unbindEvents();
  }, r.prototype.unbindEvents = function () {
    this.proxyImage.removeEventListener("load", this), this.proxyImage.removeEventListener("error", this), this.img.removeEventListener("load", this), this.img.removeEventListener("error", this);
  }, s.prototype = Object.create(r.prototype), s.prototype.check = function () {
    this.img.addEventListener("load", this), this.img.addEventListener("error", this), this.img.src = this.url;var e = this.getIsImageComplete();e && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), this.unbindEvents());
  }, s.prototype.unbindEvents = function () {
    this.img.removeEventListener("load", this), this.img.removeEventListener("error", this);
  }, s.prototype.confirm = function (e, t) {
    this.isLoaded = e, this.emitEvent("progress", [this, this.element, t]);
  }, o.makeJQueryPlugin = function (t) {
    t = t || e.jQuery, t && (h = t, h.fn.imagesLoaded = function (e, t) {
      var i = new o(this, e, t);return i.jqDeferred.promise(h(this));
    });
  }, o.makeJQueryPlugin(), o;
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9pbWFnZXNsb2FkZWQucGtnZC5taW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJkZWZpbmUiLCJhbWQiLCJtb2R1bGUiLCJleHBvcnRzIiwiRXZFbWl0dGVyIiwid2luZG93IiwicHJvdG90eXBlIiwib24iLCJpIiwiX2V2ZW50cyIsIm4iLCJpbmRleE9mIiwicHVzaCIsIm9uY2UiLCJfb25jZUV2ZW50cyIsIm9mZiIsImxlbmd0aCIsInNwbGljZSIsImVtaXRFdmVudCIsInNsaWNlIiwibyIsInIiLCJzIiwiYXBwbHkiLCJhbGxPZmYiLCJyZXF1aXJlIiwiaW1hZ2VzTG9hZGVkIiwiQXJyYXkiLCJpc0FycmF5IiwiZCIsImNhbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50cyIsIm9wdGlvbnMiLCJnZXRJbWFnZXMiLCJoIiwianFEZWZlcnJlZCIsIkRlZmVycmVkIiwic2V0VGltZW91dCIsImNoZWNrIiwiYmluZCIsImEiLCJlcnJvciIsImltZyIsInVybCIsImVsZW1lbnQiLCJJbWFnZSIsImpRdWVyeSIsImNvbnNvbGUiLCJPYmplY3QiLCJjcmVhdGUiLCJpbWFnZXMiLCJmb3JFYWNoIiwiYWRkRWxlbWVudEltYWdlcyIsIm5vZGVOYW1lIiwiYWRkSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMiLCJub2RlVHlwZSIsInUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZXhlYyIsImJhY2tncm91bmRJbWFnZSIsImFkZEJhY2tncm91bmQiLCJwcm9ncmVzcyIsInByb2dyZXNzZWRDb3VudCIsImhhc0FueUJyb2tlbiIsImNvbXBsZXRlIiwiaXNMb2FkZWQiLCJub3RpZnkiLCJkZWJ1ZyIsImxvZyIsImlzQ29tcGxldGUiLCJnZXRJc0ltYWdlQ29tcGxldGUiLCJjb25maXJtIiwibmF0dXJhbFdpZHRoIiwicHJveHlJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcmMiLCJoYW5kbGVFdmVudCIsInR5cGUiLCJvbmxvYWQiLCJ1bmJpbmRFdmVudHMiLCJvbmVycm9yIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm1ha2VKUXVlcnlQbHVnaW4iLCJmbiIsInByb21pc2UiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7O0FBTUEsQ0FBQyxVQUFVQSxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7QUFBRSxnQkFBYyxPQUFPQyxNQUFyQixJQUErQkEsT0FBT0MsR0FBdEMsR0FBNENELE9BQU8sdUJBQVAsRUFBZ0NELENBQWhDLENBQTVDLEdBQWlGLG9CQUFtQkcsTUFBbkIseUNBQW1CQSxNQUFuQixNQUE2QkEsT0FBT0MsT0FBcEMsR0FBOENELE9BQU9DLE9BQVAsR0FBaUJKLEdBQS9ELEdBQXFFRCxFQUFFTSxTQUFGLEdBQWNMLEdBQXBLO0FBQXlLLENBQTNMLENBQTRMLGVBQWUsT0FBT00sTUFBdEIsR0FBK0JBLE1BQS9CLFlBQTVMLEVBQTBPLFlBQVk7QUFBRSxXQUFTUCxDQUFULEdBQWEsQ0FBRyxDQUFDLElBQUlDLElBQUlELEVBQUVRLFNBQVYsQ0FBcUIsT0FBT1AsRUFBRVEsRUFBRixHQUFPLFVBQVVULENBQVYsRUFBYUMsQ0FBYixFQUFnQjtBQUFFLFFBQUlELEtBQUtDLENBQVQsRUFBWTtBQUFFLFVBQUlTLElBQUksS0FBS0MsT0FBTCxHQUFlLEtBQUtBLE9BQUwsSUFBZ0IsRUFBdkM7QUFBQSxVQUEyQ0MsSUFBSUYsRUFBRVYsQ0FBRixJQUFPVSxFQUFFVixDQUFGLEtBQVEsRUFBOUQsQ0FBa0UsT0FBT1ksRUFBRUMsT0FBRixDQUFVWixDQUFWLEtBQWdCLENBQUMsQ0FBakIsSUFBc0JXLEVBQUVFLElBQUYsQ0FBT2IsQ0FBUCxDQUF0QixFQUFpQyxJQUF4QztBQUE4QztBQUFFLEdBQXpKLEVBQTJKQSxFQUFFYyxJQUFGLEdBQVMsVUFBVWYsQ0FBVixFQUFhQyxDQUFiLEVBQWdCO0FBQUUsUUFBSUQsS0FBS0MsQ0FBVCxFQUFZO0FBQUUsV0FBS1EsRUFBTCxDQUFRVCxDQUFSLEVBQVdDLENB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QUEvcUcsRUFBcXNHbEUsQ0FBNXNHO0FBQStzRyxDQUE5Z0ssQ0FBMW5DIiwiZmlsZSI6ImxpYi9pbWFnZXNsb2FkZWQucGtnZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGltYWdlc0xvYWRlZCBQQUNLQUdFRCB2NC4xLjRcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbiFmdW5jdGlvbiAoZSwgdCkgeyBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFwiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsIHQpIDogXCJvYmplY3RcIiA9PSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSB0KCkgOiBlLkV2RW1pdHRlciA9IHQoKSB9KFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZSgpIHsgfSB2YXIgdCA9IGUucHJvdG90eXBlOyByZXR1cm4gdC5vbiA9IGZ1bmN0aW9uIChlLCB0KSB7IGlmIChlICYmIHQpIHsgdmFyIGkgPSB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge30sIG4gPSBpW2VdID0gaVtlXSB8fCBbXTsgcmV0dXJuIG4uaW5kZXhPZih0KSA9PSAtMSAmJiBuLnB1c2godCksIHRoaXMgfSB9LCB0Lm9uY2UgPSBmdW5jdGlvbiAoZSwgdCkgeyBpZiAoZSAmJiB0KSB7IHRoaXMub24oZSwgdCk7IHZhciBpID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge30sIG4gPSBpW2VdID0gaVtlXSB8fCB7fTsgcmV0dXJuIG5bdF0gPSAhMCwgdGhpcyB9IH0sIHQub2ZmID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIGkgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW2VdOyBpZiAoaSAmJiBpLmxlbmd0aCkgeyB2YXIgbiA9IGkuaW5kZXhPZih0KTsgcmV0dXJuIG4gIT0gLTEgJiYgaS5zcGxpY2UobiwgMSksIHRoaXMgfSB9LCB0LmVtaXRFdmVudCA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBpID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1tlXTsgaWYgKGkgJiYgaS5sZW5ndGgpIHsgaSA9IGkuc2xpY2UoMCksIHQgPSB0IHx8IFtdOyBmb3IgKHZhciBuID0gdGhpcy5fb25jZUV2ZW50cyAmJiB0aGlzLl9vbmNlRXZlbnRzW2VdLCBvID0gMDsgbyA8IGkubGVuZ3RoOyBvKyspIHsgdmFyIHIgPSBpW29dLCBzID0gbiAmJiBuW3JdOyBzICYmICh0aGlzLm9mZihlLCByKSwgZGVsZXRlIG5bcl0pLCByLmFwcGx5KHRoaXMsIHQpIH0gcmV0dXJuIHRoaXMgfSB9LCB0LmFsbE9mZiA9IGZ1bmN0aW9uICgpIHsgZGVsZXRlIHRoaXMuX2V2ZW50cywgZGVsZXRlIHRoaXMuX29uY2VFdmVudHMgfSwgZSB9KSwgZnVuY3Rpb24gKGUsIHQpIHsgXCJ1c2Ugc3RyaWN0XCI7IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCJdLCBmdW5jdGlvbiAoaSkgeyByZXR1cm4gdChlLCBpKSB9KSA6IFwib2JqZWN0XCIgPT0gdHlwZW9mIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gdChlLCByZXF1aXJlKFwiZXYtZW1pdHRlclwiKSkgOiBlLmltYWdlc0xvYWRlZCA9IHQoZSwgZS5FdkVtaXR0ZXIpIH0oXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKGUsIHQpIHsgZnVuY3Rpb24gaShlLCB0KSB7IGZvciAodmFyIGkgaW4gdCkgZVtpXSA9IHRbaV07IHJldHVybiBlIH0gZnVuY3Rpb24gbihlKSB7IGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsgdmFyIHQgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIFwibnVtYmVyXCIgPT0gdHlwZW9mIGUubGVuZ3RoOyByZXR1cm4gdCA/IGQuY2FsbChlKSA6IFtlXSB9IGZ1bmN0aW9uIG8oZSwgdCwgcikgeyBpZiAoISh0aGlzIGluc3RhbmNlb2YgbykpIHJldHVybiBuZXcgbyhlLCB0LCByKTsgdmFyIHMgPSBlOyByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiAocyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpLCBzID8gKHRoaXMuZWxlbWVudHMgPSBuKHMpLCB0aGlzLm9wdGlvbnMgPSBpKHt9LCB0aGlzLm9wdGlvbnMpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyByID0gdCA6IGkodGhpcy5vcHRpb25zLCB0KSwgciAmJiB0aGlzLm9uKFwiYWx3YXlzXCIsIHIpLCB0aGlzLmdldEltYWdlcygpLCBoICYmICh0aGlzLmpxRGVmZXJyZWQgPSBuZXcgaC5EZWZlcnJlZCksIHZvaWQgc2V0VGltZW91dCh0aGlzLmNoZWNrLmJpbmQodGhpcykpKSA6IHZvaWQgYS5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBpbWFnZXNMb2FkZWQgXCIgKyAocyB8fCBlKSkgfSBmdW5jdGlvbiByKGUpIHsgdGhpcy5pbWcgPSBlIH0gZnVuY3Rpb24gcyhlLCB0KSB7IHRoaXMudXJsID0gZSwgdGhpcy5lbGVtZW50ID0gdCwgdGhpcy5pbWcgPSBuZXcgSW1hZ2UgfSB2YXIgaCA9IGUualF1ZXJ5LCBhID0gZS5jb25zb2xlLCBkID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOyBvLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLCBvLnByb3RvdHlwZS5vcHRpb25zID0ge30sIG8ucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uICgpIHsgdGhpcy5pbWFnZXMgPSBbXSwgdGhpcy5lbGVtZW50cy5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudEltYWdlcywgdGhpcykgfSwgby5wcm90b3R5cGUuYWRkRWxlbWVudEltYWdlcyA9IGZ1bmN0aW9uIChlKSB7IFwiSU1HXCIgPT0gZS5ub2RlTmFtZSAmJiB0aGlzLmFkZEltYWdlKGUpLCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCA9PT0gITAgJiYgdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyhlKTsgdmFyIHQgPSBlLm5vZGVUeXBlOyBpZiAodCAmJiB1W3RdKSB7IGZvciAodmFyIGkgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIiksIG4gPSAwOyBuIDwgaS5sZW5ndGg7IG4rKykgeyB2YXIgbyA9IGlbbl07IHRoaXMuYWRkSW1hZ2UobykgfSBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdGhpcy5vcHRpb25zLmJhY2tncm91bmQpIHsgdmFyIHIgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLmJhY2tncm91bmQpOyBmb3IgKG4gPSAwOyBuIDwgci5sZW5ndGg7IG4rKykgeyB2YXIgcyA9IHJbbl07IHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMocykgfSB9IH0gfTsgdmFyIHUgPSB7IDE6ICEwLCA5OiAhMCwgMTE6ICEwIH07IHJldHVybiBvLnByb3RvdHlwZS5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZ2V0Q29tcHV0ZWRTdHlsZShlKTsgaWYgKHQpIGZvciAodmFyIGkgPSAvdXJsXFwoKFsnXCJdKT8oLio/KVxcMVxcKS9naSwgbiA9IGkuZXhlYyh0LmJhY2tncm91bmRJbWFnZSk7IG51bGwgIT09IG47KSB7IHZhciBvID0gbiAmJiBuWzJdOyBvICYmIHRoaXMuYWRkQmFja2dyb3VuZChvLCBlKSwgbiA9IGkuZXhlYyh0LmJhY2tncm91bmRJbWFnZSkgfSB9LCBvLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gbmV3IHIoZSk7IHRoaXMuaW1hZ2VzLnB1c2godCkgfSwgby5wcm90b3R5cGUuYWRkQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBpID0gbmV3IHMoZSwgdCk7IHRoaXMuaW1hZ2VzLnB1c2goaSkgfSwgby5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGUoZSwgaSwgbikgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdC5wcm9ncmVzcyhlLCBpLCBuKSB9KSB9IHZhciB0ID0gdGhpczsgcmV0dXJuIHRoaXMucHJvZ3Jlc3NlZENvdW50ID0gMCwgdGhpcy5oYXNBbnlCcm9rZW4gPSAhMSwgdGhpcy5pbWFnZXMubGVuZ3RoID8gdm9pZCB0aGlzLmltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7IHQub25jZShcInByb2dyZXNzXCIsIGUpLCB0LmNoZWNrKCkgfSkgOiB2b2lkIHRoaXMuY29tcGxldGUoKSB9LCBvLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uIChlLCB0LCBpKSB7IHRoaXMucHJvZ3Jlc3NlZENvdW50KysgLCB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFlLmlzTG9hZGVkLCB0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsIFt0aGlzLCBlLCB0XSksIHRoaXMuanFEZWZlcnJlZCAmJiB0aGlzLmpxRGVmZXJyZWQubm90aWZ5ICYmIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkodGhpcywgZSksIHRoaXMucHJvZ3Jlc3NlZENvdW50ID09IHRoaXMuaW1hZ2VzLmxlbmd0aCAmJiB0aGlzLmNvbXBsZXRlKCksIHRoaXMub3B0aW9ucy5kZWJ1ZyAmJiBhICYmIGEubG9nKFwicHJvZ3Jlc3M6IFwiICsgaSwgZSwgdCkgfSwgby5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5oYXNBbnlCcm9rZW4gPyBcImZhaWxcIiA6IFwiZG9uZVwiOyBpZiAodGhpcy5pc0NvbXBsZXRlID0gITAsIHRoaXMuZW1pdEV2ZW50KGUsIFt0aGlzXSksIHRoaXMuZW1pdEV2ZW50KFwiYWx3YXlzXCIsIFt0aGlzXSksIHRoaXMuanFEZWZlcnJlZCkgeyB2YXIgdCA9IHRoaXMuaGFzQW55QnJva2VuID8gXCJyZWplY3RcIiA6IFwicmVzb2x2ZVwiOyB0aGlzLmpxRGVmZXJyZWRbdF0odGhpcykgfSB9LCByLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLCByLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpOyByZXR1cm4gZSA/IHZvaWQgdGhpcy5jb25maXJtKDAgIT09IHRoaXMuaW1nLm5hdHVyYWxXaWR0aCwgXCJuYXR1cmFsV2lkdGhcIikgOiAodGhpcy5wcm94eUltYWdlID0gbmV3IEltYWdlLCB0aGlzLnByb3h5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHZvaWQgKHRoaXMucHJveHlJbWFnZS5zcmMgPSB0aGlzLmltZy5zcmMpKSB9LCByLnByb3RvdHlwZS5nZXRJc0ltYWdlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmltZy5jb21wbGV0ZSAmJiB0aGlzLmltZy5uYXR1cmFsV2lkdGggfSwgci5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uIChlLCB0KSB7IHRoaXMuaXNMb2FkZWQgPSBlLCB0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsIFt0aGlzLCB0aGlzLmltZywgdF0pIH0sIHIucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBcIm9uXCIgKyBlLnR5cGU7IHRoaXNbdF0gJiYgdGhpc1t0XShlKSB9LCByLnByb3RvdHlwZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuY29uZmlybSghMCwgXCJvbmxvYWRcIiksIHRoaXMudW5iaW5kRXZlbnRzKCkgfSwgci5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5jb25maXJtKCExLCBcIm9uZXJyb3JcIiksIHRoaXMudW5iaW5kRXZlbnRzKCkgfSwgci5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24gKCkgeyB0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcykgfSwgcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSwgcy5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHRoaXMuaW1nLnNyYyA9IHRoaXMudXJsOyB2YXIgZSA9IHRoaXMuZ2V0SXNJbWFnZUNvbXBsZXRlKCk7IGUgJiYgKHRoaXMuY29uZmlybSgwICE9PSB0aGlzLmltZy5uYXR1cmFsV2lkdGgsIFwibmF0dXJhbFdpZHRoXCIpLCB0aGlzLnVuYmluZEV2ZW50cygpKSB9LCBzLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcykgfSwgcy5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uIChlLCB0KSB7IHRoaXMuaXNMb2FkZWQgPSBlLCB0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsIFt0aGlzLCB0aGlzLmVsZW1lbnQsIHRdKSB9LCBvLm1ha2VKUXVlcnlQbHVnaW4gPSBmdW5jdGlvbiAodCkgeyB0ID0gdCB8fCBlLmpRdWVyeSwgdCAmJiAoaCA9IHQsIGguZm4uaW1hZ2VzTG9hZGVkID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIGkgPSBuZXcgbyh0aGlzLCBlLCB0KTsgcmV0dXJuIGkuanFEZWZlcnJlZC5wcm9taXNlKGgodGhpcykpIH0pIH0sIG8ubWFrZUpRdWVyeVBsdWdpbigpLCBvIH0pOyJdfQ==
